library(devtools)
install_github("yonghah/naveRtrends")
library(devtools)
install_github("yonghah/naveRtrends")
library(naveRtrends)
words <- c("햄버거", "라면", "치킨", "피자")
start <- "20080101"
end <- "20161130"
df <- naverTrends(words, start, end)
library(devtools)
install_github("yonghah/naveRtrends")
library(naveRtrends)
words <- c("햄버거", "라면", "치킨", "피자")
start <- "20080101"
end <- "20161130"
df <- ntrends(words, start, end)
# library(devtools)
# install_github("yonghah/naveRtrends")
library(naveRtrends)
words <- c("햄버거", "라면", "치킨", "피자")
start <- "20080101"
end <- "20161130"
df <- ntrends(words, start, end)
head(df)
library(ggplot2)
# 한글 표시를 위해 필요한 부분
theme_set(theme_gray(base_family='Apple SD Gothic Neo'))
ggplot(df, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
# library(devtools)
# install_github("yonghah/naveRtrends")
library(naveRtrends)
words <- c("팥빙수")
start <- "20080101"
end <- "20161130"
df <- ntrends(words, start, end)
head(df)
library(ggplot2)
# 한글 표시를 위해 필요한 부분
theme_set(theme_gray(base_family='Apple SD Gothic Neo'))
ggplot(df, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
library(naveRtrends)
words <- c("팥빙수")
start <- "20080101"
end <- "20161130"
df <- ntrends(words, start, end)
head(df)
View(df)
View(df)
library(ggplot2)
ggplot(df, aes(x=period)) +
geom_bar(aes(y=value))
library(ggplot2)
ggplot(df, aes(x=period)) +
geom_bar()
library(ggplot2)
ggplot(df, aes(period)) +
geom_bar()
library(ggplot2)
ggplot(df, aes(period, value)) +
geom_bar()
library(ggplot2)
ggplot(df, aes(period, value)) +
geom_bar(stat='identity')
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity')
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line()
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line(aes(color="#aac"))
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line(aes(fill="red"))
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', aes(fill='red'))
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', aes(fill='blue'))
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', fill='blue')
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', fill='#352984')
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', fill='#652799') +
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', fill='#652799')
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line()
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line(fill="red")
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="red")
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#942323")
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423")
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=4)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=0.1)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=0.2)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=3)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=2)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=1)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=0.1)
ggplot(df, aes(x=period, y=value)) +
geom_point(color="#943423", size=0.1)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=0.5)
ggplot(df, aes(x=period, y=value)) +
geom_point(color="#943423", size=0.1)
ggplot(df, aes(x=period)) +
geom_point(color="#943423", aes(size=value))
ggplot(df, aes(x=period, y=0)) +
geom_point(color="#943423", aes(size=value))
ggplot(df, aes(x=period, y=0)) +
geom_point(color="#943423", aes(size=value), opacity=0.2)
ggplot(df, aes(x=period, y=0)) +
geom_point(color="#943423", aes(size=value), alpha=0.2)
ggplot(df, aes(x=period, y=0)) +
geom_point(color="#943423", aes(size=value), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value*value), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=1), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0, fill="darkred"), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0, fill="#982332"), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0, color="#982332"), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0, fill=topic), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0, fill=topic, color=topic), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value*5, stroke=0), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.1)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.1) +
scale_y_continuous(limits = c(-0.1, 0.1))
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.2)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.01)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.05)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.15)
ggplot(df, aes(x=period, y=-value)) +
geom_bar(stat="identity")
ggplot(df, aes(x=period, y=-value*0.5)) +
geom_bar(stat="identity")
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat="identity")
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat="identity", position=-value)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat="identity", position=fill)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat="identity", position="fill")
ggplot(df, aes(x=period)) +
geom_bar(stat="identity", , y=value*0.5)
ggplot(df, aes(x=period)) +
geom_bar(stat="identity", y=value*0.5)
ggplot(df, aes(x=period)) +
geom_bar(stat="identity", aes(y=value*0.5))
ggplot(df, aes(x=period)) +
geom_bar(stat="identity", aes(y=value*0.5)) +
geom_bar(stat="identity", aes(y=value*-0.5))
library(ggplot2)
ggplot(df, aes(x=period, y=value)) +
geom_bar(stat='identity', fill='#652799')
ggplot(df, aes(x=period, y=value)) +
geom_point(color="#943423", size=0.1)
ggplot(df, aes(x=period, y=value)) +
geom_line(color="#943423", size=0.5)
ggplot(df, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.15)
ggplot(df, aes(x=period)) +
geom_bar(stat="identity", aes(y=value*0.5)) +
geom_bar(stat="identity", aes(y=value*-0.5))
mdf <- group_by(df, p=cut(period, "1 month"), topic) %>%
summarise(cnt=sum(value))
library(dplyr)
mdf <- group_by(df, p=cut(period, "1 month"), topic) %>%
summarise(cnt=sum(value))
library(dplyr)
mdf <- group_by(df, p=cut(period, "1 month"), topic) %>%
summarise(cnt=sum(value))
head(mdf)
ggplot(mdf, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.15)
library(dplyr)
mdf <- group_by(df, p=cut(period, "1 month"), topic) %>%
summarise(value=sum(value))
head(mdf)
ggplot(mdf, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.15)
library(dplyr)
mdf <- group_by(df, period=cut(period, "1 month"), topic) %>%
summarise(value=sum(value))
head(mdf)
ggplot(mdf, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.15)
library(dplyr)
mdf <- group_by(df, period=as.Date(cut(period, "1 month")), topic) %>%
summarise(value=sum(value))
head(mdf)
ggplot(mdf, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.15)
ggplot(mdf, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.5)
ggplot(mdf, aes(x=period, y=0)) +
geom_point(aes(size=value, stroke=0), alpha=0.3)
ggplot(mdf, aes(x=period)) +
geom_bar(stat="identity", aes(y=value*0.5)) +
geom_bar(stat="identity", aes(y=value*-0.5))
ggplot(mdf, aes(x=period, y=value)) +
geom_bar(stat="identity")
words <- c("팥빙수", "귤")
start <- "20080101"
end <- "20161130"
df2 <- ntrends(words, start, end)
head(df2)
ggplot(df2, aes(x=period, y=value)) +
geom_line()
ggplot(df2, aes(x=period, y=value)) +
geom_point()
ggplot(df2, aes(x=period, y=value)) +
geom_point(aes(color=topic))
ggplot(df2, aes(x=period, y=value)) +
geom_line(aes(color=topic))
ggplot(df2, aes(x=period, y=value)) +
geom_line(aes(color=topic)) +
facet_grid(topic~.)
mdf2 <- group_by(df2, period=as.Date(cut(period, "1 month")), topic) %>%
summarise(value=sum(value))
ggplot(mdf, aes(x=period, y=value)) +
geom_bar(stat="identity") +
facet_grid(topic~.)
ggplot(mdf2, aes(x=period, y=value)) +
geom_bar(stat="identity") +
facet_grid(topic~.)
ggplot(mdf2, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(color=topic)) +
facet_grid(topic~.)
ggplot(mdf2, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic)) +
facet_grid(topic~.)
ggplot(mdf2, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic), position="stack")
ggplot(mdf2, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic), position="fill")
ggplot(mdf2, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic), position="dodge")   # fill, stack, dodge
words <- c("김광현", "김태균", "양현종", "장원준", "최정")
start <- "20080101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
ggplot(bdf, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
words <- c("류제국", "김태균", "양현종", "장원준", "최정")
start <- "20080101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
words <- c("류제국", "김태균", "양현종", "장원준", "최정")
start <- "20100101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
ggplot(bdf, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
require(streamgraph)
streamgraph(df, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
require(streamgraph)
streamgraph(bdf, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
mdf2 <- group_by(bdf, period=as.Date(cut(period, "1 month")), topic) %>%
summarise(value=sum(value))
require(streamgraph)
mbdf <- group_by(bdf, period=as.Date(cut(period, "1 month")), topic) %>%
summarise(value=sum(value))
streamgraph(mbdf, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
require(streamgraph)
mbdf <- group_by(bdf, period=as.Date(cut(period, "2 month")), topic) %>%
summarise(value=sum(value))
streamgraph(mbdf, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
words <- c("류제국", "김광현", "양현종", "장원준", "봉중근")
start <- "20100101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
ggplot(bdf, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
require(streamgraph)
mbdf <- group_by(bdf, period=as.Date(cut(period, "2 month")), topic) %>%
summarise(value=sum(value))
streamgraph(mbdf, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
words <- c("류제국", "차우찬", "양현종", "장원준", "봉중근")
start <- "20100101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
ggplot(bdf, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
require(streamgraph)
mbdf <- group_by(bdf, period=as.Date(cut(period, "2 month")), topic) %>%
summarise(value=sum(value))
streamgraph(mbdf, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
words <- c("러블리즈", "여자친구", "마마무", "레드벨벳", "트와이스")
start <- "20140101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
words <- c("러블리즈", "여자친구", "마마무", "레드벨벳", "트와이스")
start <- "20130101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
words <- c("러블리즈", "여자친구", "마마무", "레드벨벳", "트와이스")
start <- "20140101"
end <- "20161130"
bdf <- ntrends(words, start, end)
head(bdf)
ggplot(bdf, aes(x=period, y=value, group=topic)) +
geom_line(aes(color=topic))
require(streamgraph)
mbdf <- group_by(bdf, period=as.Date(cut(period, "1 month")), topic) %>%
summarise(value=sum(value))
streamgraph(mbdf, "topic", "value", "period", interpolate="cardinal") %>%
sg_axis_x(20, "period", "%Y") %>%
sg_fill_brewer("Dark2")
ggplot(mbdf, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic)) +
facet_grid(topic~.)
ggplot(bdf, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic)) +
facet_grid(topic~.)
ggplot(mbdf, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic)) +
facet_grid(topic~.)
wbdf2 <- group_by(bdf, period=as.Date(cut(period, "2 week")), topic) %>%
summarise(value=sum(value))
ggplot(wbdf2, aes(x=period, y=value)) +
geom_bar(stat="identity", aes(fill=topic)) +
facet_grid(topic~.)
library(httr)
library(ggplot2)
library(dplyr)
rvc <- ''
url <- ''
getRevDates <- function(title, rvid) {
pl <- list(
action='query',
prop='revisions',
titles=title,
format='json',
rvlimit='500')
if (rvid != '') {
pl <- c(pl, rvcontinue=rvid)
}
r <- POST(url, body = pl)
res <- content(r)
rev <- res$query$pages[[1]]$revisions
date <- unlist(lapply(rev, function(x) x$timestamp))
date_posix <- as.POSIXct(strptime(date, "%Y-%m-%dT%H:%M:%SZ", tz="UTC"))
rvc <<- res$continue$rvcontinue
return(date)
}
getRevisionHistory <- function(title, lang){
results <- vector()
rvc <<-''
url <<- paste("https://", lang, ".wikipedia.org/w/api.php", sep = "")
# res$continue$rvcontinue가 없을 때까지 반복
while(!is.null(rvc)) {
t <- getRevDates(title, rvc)
results <- c(results, t)
}
date_posixct <-  as.POSIXct(strptime(results, "%Y-%m-%dT%H:%M:%SZ", tz="UTC"))
rt <- as.data.frame(date_posixct, date)
rt <- rt %>%
mutate(date = as.Date(date_posixct)) %>%
mutate(title = title)
return(rt)
}
titles <- c('Girl\'s_Day', 'AOA_(band)')
df <- do.call(rbind, lapply(titles, getRevisionHistory, lang="en"))
head(df)
View(df)
View(df)
source("wikiRevisions.R")
setwd("~/work/repo/yonsei-workshop/examples/temporal/wikipedia")
source("wikiRevisions.R")
titles <- c('Girl\'s_Day', 'AOA_(band)')
wikiRevisions(titles, "en")
df <- wikiRevisions(titles, "en")
View(df)
View(df)
source("wikiRevisions.R")
titles <- c('Girl\'s_Day', 'AOA_(band)')
df <- wikiRevisions(titles, "en")
View(df)
View(df)
source("wikiRevisions.R")
titles <- c('Girl\'s_Day', 'AOA_(band)')
df <- wikiRevisions(titles, "en")
View(df)
View(df)
source("wikiRevisions.R")
titles <- c('Girl\'s_Day', 'AOA_(band)')
df <- wikiRevisions(titles, "en")
View(df)
View(df)
source("wikiRevisions.R")
titles <- c('Girl\'s_Day', 'AOA_(band)')
df <- wikiRevisions(titles, "en")
library(ggplot2)
ggplot(df, aes(x=date)) + geom_histogram(binwidth=20)
library(ggplot2)
ggplot(df, aes(x=date)) + geom_histogram(binwidth=20) + facet_grid(title~.)
