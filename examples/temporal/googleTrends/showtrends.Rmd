---
title: "Naver Trends"
output: html_notebook
---


```{r}
library(httr)
library(jsonlite)
library(dplyr)

pl <- list(qcType="N", 
           queryGroups="귤__SZLIG__귤__OUML__팥빙수__SZLIG__팥빙수__OUML__딸기__SZLIG__딸기", 
           startDate="20111101",
           endDate="20161130");
url <- "http://datalab.naver.com/ca/step1/process.naver"
r <- POST(url, body = pl)
res <- content(r)

processSeries <- function(sdata) {
  title <- sdata$title
  tdf <- do.call(rbind, 
              lapply(sdata$data, 
                     data.frame, 
                     stringsAsFactors=FALSE))
  tdf <- mutate(tdf, topic=title, 
                period=as.Date(period, "%Y%m%d"), 
                value=as.numeric(value)) 
  return(tdf)
}
df <- do.call(rbind, lapply(res$result, processSeries))

```

라인 그래프를 그려보자

```{r}
library(ggplot2)
theme_set(theme_gray(base_family='Apple SD Gothic Neo'))
p <- ggplot(df, aes(x=period, y=value, group=topic)) + 
  geom_line(aes(color=topic))
p
```


